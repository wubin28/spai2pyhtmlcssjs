# Implementation Plan: Agentic AI Performance Dashboard
**Created:** 2025-10-05 21:05
**Status:** Ready for execution

## COMPREHENSIVE TECHNICAL SPECIFICATION

### Project Overview
Create a Python data analysis script that reads an Excel file, performs three specific analyses on Agentic AI Performance data, and generates a self-contained HTML dashboard with embedded visualizations.

### File Structure
```
/home/wzb/OOR/katas/spai2pyhtmlcssjs/
├── venv/                          (already exists)
├── first-80-rows-agentic_ai_performance_dataset_20250622.xlsx (already exists)
├── analyze_data.py                (to be created)
└── data-dashboard.html            (to be generated by analyze_data.py)
```

### Detailed Implementation Plan

---

## PART 1: Python Script (analyze_data.py)

### Section 1.1: Imports and Constants
- Import: `pandas`, `json`
- Define constants:
  - `EXCEL_FILE = 'first-80-rows-agentic_ai_performance_dataset_20250622.xlsx'`
  - `OUTPUT_HTML = 'data-dashboard.html'`
  - `HEADER_ROW = 1`

### Section 1.2: Data Loading Function
- Function: `load_data()`
- Read Excel file using `pd.read_excel(EXCEL_FILE, header=HEADER_ROW)`
- Return: DataFrame
- Add docstring explaining header parameter

### Section 1.3: Analysis Function 1 - Agent Type Multimodal Proportion
- Function: `analyze_agent_type_multimodal(df)`
- Steps:
  1. Group by `agent_type`
  2. Calculate total count per agent_type
  3. Calculate count where `multimodal_capability == True` per agent_type
  4. Calculate proportion: (multimodal_count / total_count) * 100
  5. Sort by proportion descending
  6. Select top 3
- Return: List of dicts `[{'name': str, 'proportion': float, 'count': int, 'total': int}, ...]`

### Section 1.4: Analysis Function 2 - Model Architecture Multimodal Proportion
- Function: `analyze_model_architecture_multimodal(df)`
- Steps:
  1. Group by `model_architecture`
  2. Calculate total count per model_architecture
  3. Calculate count where `multimodal_capability == True` per model_architecture
  4. Calculate proportion: (multimodal_count / total_count) * 100
  5. Sort by proportion descending
  6. Select top 3
- Return: List of dicts `[{'name': str, 'proportion': float, 'count': int, 'total': int}, ...]`

### Section 1.5: Analysis Function 3 - Task Category Bias Detection Median
- Function: `analyze_task_category_bias_median(df)`
- Steps:
  1. Group by `task_category`
  2. Calculate median of `bias_detection_score` per task_category
  3. Sort by median descending
  4. Select top 3
- Return: List of dicts `[{'name': str, 'median': float}, ...]`

### Section 1.6: HTML Template Generation
- Function: `generate_html(analysis1, analysis2, analysis3, total_rows)`
- Parameters:
  - `analysis1`: Result from analyze_agent_type_multimodal
  - `analysis2`: Result from analyze_model_architecture_multimodal
  - `analysis3`: Result from analyze_task_category_bias_median
  - `total_rows`: Total number of data rows processed
- Generate complete HTML string with:
  - Embedded Chart.js library (minified, version 4.4.1)
  - CSS styles for light theme and mobile responsiveness
  - JavaScript data objects for all three analyses
  - Chart.js configuration for three horizontal bar charts
  - Display of total rows processed

### Section 1.7: Main Execution Block
- `if __name__ == '__main__':`
  1. Load data using `load_data()`
  2. Get row count: `total_rows = len(df)`
  3. Run analysis 1: `result1 = analyze_agent_type_multimodal(df)`
  4. Run analysis 2: `result2 = analyze_model_architecture_multimodal(df)`
  5. Run analysis 3: `result3 = analyze_task_category_bias_median(df)`
  6. Generate HTML: `html_content = generate_html(result1, result2, result3, total_rows)`
  7. Write to file: `with open(OUTPUT_HTML, 'w', encoding='utf-8') as f: f.write(html_content)`
  8. Print success message with file path

---

## PART 2: HTML Dashboard Structure (Generated by Python)

### Section 2.1: HTML Head
- DOCTYPE html5
- Meta charset UTF-8
- Meta viewport for mobile: `width=device-width, initial-scale=1.0`
- Title: "Agentic AI Performance Dashboard 2025"
- Embedded CSS styles

### Section 2.2: CSS Styles
- Body:
  - Light background: `#f5f7fa`
  - Font: `'Segoe UI', Tahoma, Geneva, Verdana, sans-serif`
  - Margin: 0, Padding: 20px
- Container:
  - Max-width: 1200px
  - Margin: 0 auto
  - Background: white
  - Border-radius: 12px
  - Padding: 30px
  - Box-shadow: subtle
- Header:
  - Color: `#2c3e50`
  - Text-align: center
  - Margin-bottom: 30px
- Chart containers:
  - Margin-bottom: 40px
  - Background: `#fafbfc`
  - Padding: 20px
  - Border-radius: 8px
- Chart titles:
  - Color: `#34495e`
  - Font-size: 1.2em
  - Margin-bottom: 15px
- Canvas:
  - Max-height: 300px
- Info box (rows processed):
  - Background: `#e8f4f8`
  - Padding: 15px
  - Border-left: 4px solid `#3498db`
  - Margin-top: 30px
- Responsive media query for mobile (max-width: 768px):
  - Reduce padding
  - Adjust font sizes
  - Canvas max-height: 250px

### Section 2.3: HTML Body Structure
- Main container div
- Header: `<h1>Agentic AI Performance Dashboard 2025</h1>`
- Row count display: `<p>数据集总记录数：{total_rows} 条</p>`
- Chart section 1:
  - Title: "问题1：支持多模态的智能体类型占比 TOP3"
  - Canvas element with id: `chart1`
- Chart section 2:
  - Title: "问题2：支持多模态的大模型架构占比 TOP3"
  - Canvas element with id: `chart2`
- Chart section 3:
  - Title: "问题3：各任务类型公正性中位数 TOP3"
  - Canvas element with id: `chart3`
- Footer info box with dataset details

### Section 2.4: Embedded Chart.js Library
- Minified Chart.js v4.4.1 code embedded in `<script>` tag
- Complete library code (approximately 200KB minified)

### Section 2.5: Data JavaScript Objects
- `const data1`: Array from analysis1 results
  ```javascript
  const data1 = [
    {name: 'agent_type_name', proportion: XX.XX, count: X, total: X},
    ...
  ];
  ```
- `const data2`: Array from analysis2 results
  ```javascript
  const data2 = [
    {name: 'model_arch_name', proportion: XX.XX, count: X, total: X},
    ...
  ];
  ```
- `const data3`: Array from analysis3 results
  ```javascript
  const data3 = [
    {name: 'task_category_name', median: X.XXXX},
    ...
  ];
  ```

### Section 2.6: Chart Configuration and Rendering
- Chart 1 configuration:
  - Type: 'bar'
  - Data labels: Extract names from data1
  - Data values: Extract proportions from data1
  - Options:
    - indexAxis: 'y' (horizontal bars)
    - backgroundColor: ['#a8dadc', '#457b9d', '#1d3557'] (light blues)
    - Scales: x-axis 0-100%
    - Plugins: title, legend (display: false), tooltip showing proportion + counts
- Chart 2 configuration:
  - Type: 'bar'
  - Data labels: Extract names from data2
  - Data values: Extract proportions from data2
  - Options:
    - indexAxis: 'y'
    - backgroundColor: ['#b8e0d2', '#6a994e', '#386641'] (light greens)
    - Scales: x-axis 0-100%
    - Plugins: title, legend (display: false), tooltip showing proportion + counts
- Chart 3 configuration:
  - Type: 'bar'
  - Data labels: Extract names from data3
  - Data values: Extract medians from data3
  - Options:
    - indexAxis: 'y'
    - backgroundColor: ['#ffd6a5', '#fdac7a', '#f08080'] (light oranges)
    - Scales: x-axis 0-1.0
    - Plugins: title, legend (display: false), tooltip showing median value
- Render charts:
  ```javascript
  new Chart(document.getElementById('chart1'), chart1Config);
  new Chart(document.getElementById('chart2'), chart2Config);
  new Chart(document.getElementById('chart3'), chart3Config);
  ```

---

## PART 3: Code Documentation

### Python Comments (Chinese + English)
- File header: Purpose, author (AI), date
- Each function: Docstring explaining purpose, parameters, return value
- Inline comments for complex operations (groupby, calculations)
- Main block: Step-by-step execution comments

### HTML/JavaScript Comments (Chinese + English)
- Section headers for CSS, data, configs, rendering
- Explanation of Chart.js options
- Mobile responsiveness notes

---

## PART 4: Testing and Validation

### Execution Steps
1. Navigate to project directory: `/home/wzb/OOR/katas/spai2pyhtmlcssjs/`
2. Activate virtual environment: `source venv/bin/activate`
3. Run script: `python analyze_data.py`
4. Verify `data-dashboard.html` is created
5. Open HTML in browser to verify rendering
6. Test mobile responsiveness (browser dev tools)

### Expected Outputs
- Console: Success message with file paths
- File: `data-dashboard.html` (approximately 250-300KB with embedded Chart.js)
- Visual: Three horizontal bar charts, light color scheme, readable text
- Functionality: Charts render correctly, tooltips work, mobile-friendly

---

## IMPLEMENTATION CHECKLIST:

- [ ] 1. Create `analyze_data.py` file with imports and constants section
- [ ] 2. Implement `load_data()` function in `analyze_data.py`
- [ ] 3. Implement `analyze_agent_type_multimodal(df)` function in `analyze_data.py`
- [ ] 4. Implement `analyze_model_architecture_multimodal(df)` function in `analyze_data.py`
- [ ] 5. Implement `analyze_task_category_bias_median(df)` function in `analyze_data.py`
- [ ] 6. Implement `generate_html()` function with complete HTML template including embedded Chart.js library
- [ ] 7. Implement main execution block in `analyze_data.py`
- [ ] 8. Test script execution: `venv/bin/python analyze_data.py`
- [ ] 9. Verify `data-dashboard.html` is generated successfully
- [ ] 10. Open `data-dashboard.html` in browser to verify all three charts render correctly
- [ ] 11. Verify mobile responsiveness of dashboard
- [ ] 12. Final review and documentation

---

## REVIEW SECTION
(To be completed after execution)
